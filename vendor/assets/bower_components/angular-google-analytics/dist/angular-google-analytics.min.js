/**
 * Angular Google Analytics - Easy tracking for your AngularJS application
 * @version v1.1.7 - 2016-03-25
 * @link http://github.com/revolunet/angular-google-analytics
 * @author Julien Bouquillon <julien@revolunet.com> (https://github.com/revolunet)
 * @contributors Julien Bouquillon (https://github.com/revolunet),Justin Saunders (https://github.com/justinsa),Chris Esplin (https://github.com/deltaepsilon),Adam Misiorny (https://github.com/adam187)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["angular"],n):"object"==typeof module&&module.exports?module.exports=n(require("angular")):n(t.angular)}(this,function(t,n){"use strict";return t.module("angular-google-analytics",[]).provider("Analytics",function(){var e,i,r,a,c,o=!0,s="auto",u=!1,l=!1,f="USD",d=!1,m=!1,p=!1,g=!1,h=!1,k=!1,_=!1,y=!0,v=!1,E=!1,b=!1,w="$routeChangeSuccess",T=!1,A=!1,D=!1,C="",P=!0,j=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(i){return e=t.isUndefined(i)||i===!1?n:t.isArray(i)?i:t.isObject(i)?[i]:[{tracker:i,trackEvent:!0}],this},this.trackPages=function(t){return P=!!t,this},this.trackPrefix=function(t){return C=t,this},this.setDomainName=function(t){return r=t,this},this.useDisplayFeatures=function(t){return p=!!t,this},this.useAnalytics=function(t){return o=!!t,this},this.useEnhancedLinkAttribution=function(t){return _=!!t,this},this.useCrossDomainLinker=function(t){return l=!!t,this},this.setCrossLinkDomains=function(t){return i=t,this},this.setPageEvent=function(t){return w=t,this},this.setCookieConfig=function(t){return s=t,this},this.useECommerce=function(t,n){return h=!!t,k=!!n,this},this.setCurrency=function(t){return f=t,this},this.setRemoveRegExp=function(t){return t instanceof RegExp&&(c=t),this},this.setExperimentId=function(t){return a=t,this},this.ignoreFirstPageLoad=function(t){return y=!!t,this},this.trackUrlParams=function(t){return j=!!t,this},this.disableAnalytics=function(t){return g=!!t,this},this.setHybridMobileSupport=function(t){return E=!!t,this},this.startOffline=function(t){return b=!!t,b===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(t){return m=!!t,this},this.logAllCalls=function(t){return v=!!t,this},this.enterTestMode=function(){return A=!0,this},this.enterDebugMode=function(t){return d=!0,D=!!t,this},this.readFromRoute=function(t){return T=!!t,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(x,L,S,I,q,$){var N=this,F=function(n,e){return t.isObject(e)&&t.isDefined(e[n])},O=function(t,n,e){return F(t,n)&&n[t]===e},M=function(n,e){return t.isString(e)?e+"."+n:F("name",e)?e.name+"."+n:n},U={};T&&($.has("$route")?U=$.get("$route"):S.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var R=function(){if(T&&U.current&&"pageTrack"in U.current)return U.current.pageTrack;var t=j?L.url():L.path();return c?t.replace(c,""):t},Q=function(){var n={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},e={};return t.forEach(L.search(),function(i,r){var a=n[r];t.isDefined(a)&&(e[a]=i)}),e},B=function(t,n,e,i,r,a,c,o,s){var u={};return t&&(u.id=t),n&&(u.affiliation=n),e&&(u.revenue=e),i&&(u.tax=i),r&&(u.shipping=r),a&&(u.coupon=a),c&&(u.list=c),o&&(u.step=o),s&&(u.option=s),u},V=function(t){!o&&q._gaq&&"function"==typeof t&&t()},X=function(){var t=Array.prototype.slice.call(arguments);return b===!0?void N.offlineQueue.push([X,t]):(q._gaq||(q._gaq=[]),v===!0&&N._log.apply(N,t),void q._gaq.push(t))},G=function(t){o&&q.ga&&"function"==typeof t&&t()},H=function(){var t=Array.prototype.slice.call(arguments);return b===!0?void N.offlineQueue.push([H,t]):"function"!=typeof q.ga?void N._log("warn","ga function not set on window"):(v===!0&&N._log.apply(N,t),void q.ga.apply(null,t))},z=function(t){var n=Array.prototype.slice.call(arguments,1),i=n[0],r=[];return"function"==typeof t?e.forEach(function(n){t(n)&&r.push(n)}):r=e,0===r.length?void H.apply(N,n):void r.forEach(function(t){(!F("select",t)||"function"!=typeof t.select||t.select(n))&&(n[0]=M(i,t),H.apply(N,n))})};return this._log=function(){var t=Array.prototype.slice.call(arguments);if(t.length>0){if(t.length>1)switch(t[0]){case"debug":case"error":case"info":case"log":case"warn":S[t[0]](t.slice(1))}N.log.push(t)}},this._createScriptTag=function(){if(!e||e.length<1)return void N._log("warn","No account id set to create script tag");if(e.length>1&&(N._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),e=e.slice(0,1)),u===!0)return void N._log("warn","ga.js or analytics.js script tag already created");g===!0&&(N._log("info","Analytics disabled: "+e[0].tracker),q["ga-disable-"+e[0].tracker]=!0),X("_setAccount",e[0].tracker),r&&X("_setDomainName",r),_&&X("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),P&&!y&&(c?X("_trackPageview",R()):X("_trackPageview"));var t,n=x[0];return t=p===!0?("https:"===n.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===n.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",A!==!0?!function(){var e=n.createElement("script");e.type="text/javascript",e.async=!0,e.src=t;var i=n.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}():N._log("inject",t),u=!0,!0},this._createAnalyticsScriptTag=function(){if(!e)return void N._log("warn","No account id set to create analytics script tag");if(u===!0)return void N._log("warn","ga.js or analytics.js script tag already created");g===!0&&e.forEach(function(t){N._log("info","Analytics disabled: "+t.tracker),q["ga-disable-"+t.tracker]=!0});var n=x[0],r=E===!0?"https:":"",c=r+"//www.google-analytics.com/"+(d?"analytics_debug.js":"analytics.js");if(A!==!0?!function(t,n,e,i,r,a,c){t.GoogleAnalyticsObject=r,t[r]=t[r]||function(){(t[r].q=t[r].q||[]).push(arguments)},t[r].l=1*new Date,a=n.createElement(e),c=n.getElementsByTagName(e)[0],a.async=1,a.src=i,c.parentNode.insertBefore(a,c)}(window,n,"script",c,"ga"):("function"!=typeof q.ga&&(q.ga=function(){}),N._log("inject",c)),D&&(q.ga_debug={trace:!0}),e.forEach(function(n){n.crossDomainLinker=F("crossDomainLinker",n)?n.crossDomainLinker:l,n.crossLinkDomains=F("crossLinkDomains",n)?n.crossLinkDomains:i,n.displayFeatures=F("displayFeatures",n)?n.displayFeatures:p,n.enhancedLinkAttribution=F("enhancedLinkAttribution",n)?n.enhancedLinkAttribution:_,n.set=F("set",n)?n.set:{},n.trackEcommerce=F("trackEcommerce",n)?n.trackEcommerce:h,n.trackEvent=F("trackEvent",n)?n.trackEvent:!1;var e={};F("fields",n)?e=n.fields:F("cookieConfig",n)?t.isString(n.cookieConfig)?e.cookieDomain=n.cookieConfig:e=n.cookieConfig:t.isString(s)?e.cookieDomain=s:s&&(e=s),n.crossDomainLinker===!0&&(e.allowLinker=!0),F("name",n)&&(e.name=n.name),n.fields=e,H("create",n.tracker,n.fields),E===!0&&H(M("set",n),"checkProtocolTask",null);for(var r in n.set)n.set.hasOwnProperty(r)&&H(M("set",n),r,n.set[r]);n.crossDomainLinker===!0&&(H(M("require",n),"linker"),t.isDefined(n.crossLinkDomains)&&H(M("linker:autoLink",n),n.crossLinkDomains)),n.displayFeatures&&H(M("require",n),"displayfeatures"),n.trackEcommerce&&(k?(H(M("require",n),"ec"),H(M("set",n),"&cu",f)):H(M("require",n),"ecommerce")),n.enhancedLinkAttribution&&H(M("require",n),"linkid"),P&&!y&&H(M("send",n),"pageview",C+R())}),a){var o=n.createElement("script"),m=n.getElementsByTagName("script")[0];o.src=r+"//www.google-analytics.com/cx/api.js?experiment="+a,m.parentNode.insertBefore(o,m)}return u=!0,!0},this._ecommerceEnabled=function(t,n){var e=h&&!k;return t===!0&&e===!1&&(h&&k?N._log("warn",n+" is not available when Enhanced Ecommerce is enabled with analytics.js"):N._log("warn","Ecommerce must be enabled to use "+n+" with analytics.js")),e},this._enhancedEcommerceEnabled=function(t,n){var e=h&&k;return t===!0&&e===!1&&N._log("warn","Enhanced Ecommerce must be enabled to use "+n+" with analytics.js"),e},this._trackPage=function(e,i,r){e=e?e:R(),i=i?i:x[0].title,V(function(){X("_set","title",i),X("_trackPageview",C+e)}),G(function(){var a={page:C+e,title:i};t.extend(a,Q()),t.isObject(r)&&t.extend(a,r),z(n,"send","pageview",a)})},this._trackEvent=function(n,e,i,r,a,c){V(function(){X("_trackEvent",n,e,i,r,!!a)}),G(function(){var o={},s=function(t){return O("trackEvent",t,!0)};t.isDefined(a)&&(o.nonInteraction=!!a),t.isObject(c)&&t.extend(o,c),t.isDefined(o.page)||(o.page=R()),z(s,"send","event",n,e,i,r,o)})},this._addTrans=function(t,n,e,i,r,a,c,o,s){V(function(){X("_addTrans",t,n,e,i,r,a,c,o)}),G(function(){if(N._ecommerceEnabled(!0,"addTrans")){var a=function(t){return O("trackEcommerce",t,!0)};z(a,"ecommerce:addTransaction",{id:t,affiliation:n,revenue:e,tax:i,shipping:r,currency:s||"USD"})}})},this._addItem=function(t,n,e,i,r,a){V(function(){X("_addItem",t,n,e,i,r,a)}),G(function(){if(N._ecommerceEnabled(!0,"addItem")){var c=function(t){return O("trackEcommerce",t,!0)};z(c,"ecommerce:addItem",{id:t,name:e,sku:n,category:i,price:r,quantity:a})}})},this._trackTrans=function(){V(function(){X("_trackTrans")}),G(function(){if(N._ecommerceEnabled(!0,"trackTrans")){var t=function(t){return O("trackEcommerce",t,!0)};z(t,"ecommerce:send")}})},this._clearTrans=function(){G(function(){if(N._ecommerceEnabled(!0,"clearTrans")){var t=function(t){return O("trackEcommerce",t,!0)};z(t,"ecommerce:clear")}})},this._addProduct=function(n,e,i,r,a,c,o,s,u,l){V(function(){X("_addProduct",n,e,i,r,a,c,o,s,u)}),G(function(){if(N._enhancedEcommerceEnabled(!0,"addProduct")){var f=function(t){return O("trackEcommerce",t,!0)},d={id:n,name:e,category:i,brand:r,variant:a,price:c,quantity:o,coupon:s,position:u};t.isObject(l)&&t.extend(d,l),z(f,"ec:addProduct",d)}})},this._addImpression=function(t,n,e,i,r,a,c,o){V(function(){X("_addImpression",t,n,e,i,r,a,c,o)}),G(function(){if(N._enhancedEcommerceEnabled(!0,"addImpression")){var s=function(t){return O("trackEcommerce",t,!0)};z(s,"ec:addImpression",{id:t,name:n,category:r,brand:i,variant:a,list:e,position:c,price:o})}})},this._addPromo=function(t,n,e,i){V(function(){X("_addPromo",t,n,e,i)}),G(function(){if(N._enhancedEcommerceEnabled(!0,"addPromo")){var r=function(t){return O("trackEcommerce",t,!0)};z(r,"ec:addPromo",{id:t,name:n,creative:e,position:i})}})},this._setAction=function(t,n){V(function(){X("_setAction",t,n)}),G(function(){if(N._enhancedEcommerceEnabled(!0,"setAction")){var e=function(t){return O("trackEcommerce",t,!0)};z(e,"ec:setAction",t,n)}})},this._trackTransaction=function(t,n,e,i,r,a,c,o,s){this._setAction("purchase",B(t,n,e,i,r,a,c,o,s))},this._trackRefund=function(t){this._setAction("refund",B(t))},this._trackCheckOut=function(t,n){this._setAction("checkout",B(null,null,null,null,null,null,null,t,n))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(t,n){-1!==["add","remove"].indexOf(t)&&(this._setAction(t,{list:n}),this._trackEvent("UX","click",t+("add"===t?" to cart":" from cart")))},this._promoClick=function(t){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",t)},this._productClick=function(t){this._setAction("click",B(null,null,null,null,null,null,t,null,null)),this._trackEvent("UX","click",t)},this._pageView=function(t){G(function(){H(M("send",t),"pageview")})},this._send=function(){var t=Array.prototype.slice.call(arguments);t.unshift("send"),G(function(){H.apply(N,t)})},this._set=function(t,n,e){G(function(){H(M("set",e),t,n)})},this._trackTimings=function(t,e,i,r){G(function(){z(n,"send","timing",t,e,i,r)})},this._trackException=function(t,e){G(function(){z(n,"send","exception",{exDescription:t,exFatal:!!e})})},m||(o?this._createAnalyticsScriptTag():this._createScriptTag()),P&&I.$on(w,function(){(!T||U.current&&U.current.templateUrl&&!U.current.doNotTrack)&&N._trackPage()}),{log:N.log,offlineQueue:N.offlineQueue,configuration:{accounts:e,universalAnalytics:o,crossDomainLinker:l,crossLinkDomains:i,currency:f,debugMode:d,delayScriptTag:m,disableAnalytics:g,displayFeatures:p,domainName:r,ecommerce:N._ecommerceEnabled(),enhancedEcommerce:N._enhancedEcommerceEnabled(),enhancedLinkAttribution:_,experimentId:a,hybridMobileSupport:E,ignoreFirstPageLoad:y,logAllCalls:v,pageEvent:w,readFromRoute:T,removeRegExp:c,testMode:A,traceDebuggingMode:D,trackPrefix:C,trackRoutes:P,trackUrlParams:j},getUrl:R,setCookieConfig:N._setCookieConfig,getCookieConfig:function(){return s},createAnalyticsScriptTag:function(t){return t&&(s=t),N._createAnalyticsScriptTag()},createScriptTag:function(){return N._createScriptTag()},offline:function(t){if(t===!0&&b===!1&&(b=!0),t===!1&&b===!0)for(b=!1;N.offlineQueue.length>0;){var n=N.offlineQueue.shift();n[0].apply(N,n[1])}return b},trackPage:function(t,n,e){N._trackPage.apply(N,arguments)},trackEvent:function(t,n,e,i,r,a){N._trackEvent.apply(N,arguments)},addTrans:function(t,n,e,i,r,a,c,o,s){N._addTrans.apply(N,arguments)},addItem:function(t,n,e,i,r,a){N._addItem.apply(N,arguments)},trackTrans:function(){N._trackTrans.apply(N,arguments)},clearTrans:function(){N._clearTrans.apply(N,arguments)},addProduct:function(t,n,e,i,r,a,c,o,s,u){N._addProduct.apply(N,arguments)},addPromo:function(t,n,e,i){N._addPromo.apply(N,arguments)},addImpression:function(t,n,e,i,r,a,c,o){N._addImpression.apply(N,arguments)},productClick:function(t){N._productClick.apply(N,arguments)},promoClick:function(t){N._promoClick.apply(N,arguments)},trackDetail:function(){N._trackDetail.apply(N,arguments)},trackCart:function(t,n){N._trackCart.apply(N,arguments)},trackCheckout:function(t,n){N._trackCheckOut.apply(N,arguments)},trackTimings:function(t,n,e,i){N._trackTimings.apply(N,arguments)},trackTransaction:function(t,n,e,i,r,a,c,o,s){N._trackTransaction.apply(N,arguments)},trackException:function(t,n){N._trackException.apply(N,arguments)},setAction:function(t,n){N._setAction.apply(N,arguments)},pageView:function(){N._pageView.apply(N,arguments)},send:function(t){N._send.apply(N,arguments)},set:function(t,n,e){N._set.apply(N,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(t,n){return{restrict:"A",link:function(e,i,r){var a=n(r.gaTrackEvent);i.bind("click",function(){(!r.gaTrackEventIf||e.$eval(r.gaTrackEventIf))&&a.length>1&&t.trackEvent.apply(t,a(e))})}}}]),t.module("angular-google-analytics")});