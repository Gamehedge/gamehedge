"use strict";function isArray(value){return"[object Array]"===Object.prototype.toString.call(value)}function isBoolean(value){return"boolean"==typeof value}function isDate(value){return"[object Date]"===Object.prototype.toString.call(value)}function isDefined(value){return"undefined"!=typeof value}function isFunction(value){return"function"==typeof value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isUndefined(value){return"undefined"==typeof value}function convertToBoolean(value){return isBoolean(value)?value:null!==value&&""!==value&&"false"!==value}function hasProperty(obj,prop){return obj.hasOwnProperty(prop)}function isStringEmpty(value){return isNull(value)||isUndefined(value)||isString(value)&&0==value.length}function isStringNonempty(value){return isString(value)&&value.length>0}function upperCaseFirstLetter(input){return input.charAt(0).toUpperCase()+input.slice(1)}function areEqual(obj1,obj2){return angular.equals(obj1,obj2)}function min(a,b){return a<b?a:b}function max(a,b){return a>b?a:b}function beginsWith(input,prefix){return isString(input)&&0==input.lastIndexOf(prefix,0)}function endsWith(input,postfix){return isString(input)&&input.indexOf(postfix,input.length-postfix.length)!==-1}function copy(source,destination){return angular.copy(source,destination)}function removeProperty(obj,property){delete obj[property]}function removeProperties(obj,properties){for(var i=0;i<properties.length;++i)delete obj[properties[i]]}function forEach(obj,iterator,context){return angular.forEach(obj,iterator,context)}function defineScalyrJsLibrary(libraryName,libraryExporter){var moduleDependencies=[];if(libraryExporter instanceof Array)for(var i=0;i<libraryExporter.length-1;++i)moduleDependencies.push(libraryExporter[i]);return angular.module(libraryName,moduleDependencies).factory(libraryName,libraryExporter)}function defineScalyrAngularModule(moduleName,dependencies){return angular.module(moduleName,dependencies)}angular.module("sly",["slyEvaluate","slyRepeat"]),defineScalyrAngularModule("slyEvaluate",["gatedScope"]).directive("slyEvaluateOnlyWhen",["$parse",function($parse){return{scope:!0,restrict:"A",compile:function(){return{pre:function(scope,element,attrs){var previousValue=null,initialized=!1,expressionToCheck=$parse(attrs.slyEvaluateOnlyWhen),alwaysEvaluateString=null;if(hasProperty(attrs,"slyAlwaysEvaluate")&&(alwaysEvaluateString=attrs.slyAlwaysEvaluate,isStringEmpty(alwaysEvaluateString)))throw new Exception("Empty string is illegal for value of slyAlwaysEvaluate");scope.$addWatcherGate(function(){var currentValue=expressionToCheck(scope);if(!initialized)return initialized=!0,previousValue=currentValue,!0;var result=previousValue!==currentValue;return previousValue=currentValue,result},function(watchExpression){return isNull(alwaysEvaluateString)||!(isStringNonempty(watchExpression)&&watchExpression.indexOf(alwaysEvaluateString)>=0)},!0)}}}}}]).directive("slyAlwaysEvaluate",function(){return{restrict:"A",link:function(){}}}).directive("slyShow",["$animate",function($animate){function toBoolean(value){if(value&&0!==value.length){var v=""+value;v=isString(v)?v.toLowerCase():v,value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}return{restrict:"A",link:function(scope,element,attr){scope.$watch(attr.slyShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")},!1,"slyShow")}}}]).directive("slyPreventEvaluationWhenHidden",function(){return{restrict:"A",scope:!0,compile:function(){return{pre:function(scope,element){scope.$addWatcherGate(function(){return!element.hasClass("ng-hide")},function(watchExpression,listener,equality,directiveName){return!isDefined(directiveName)||"slyShow"!=directiveName})}}}}}),defineScalyrAngularModule("slyRepeat",["gatedScope"]).directive("slyRepeat",["$animate","$parse",function($animate){function gateWatchersForScope(elementScope){elementScope.scope.$addWatcherGate(function(){return elementScope.isActiveForRepeat})}return{restrict:"A",scope:!0,transclude:"element",priority:1e3,terminal:!0,compile:function(element,attr,linker){return function($scope,$element,$attr){var expression=$attr.slyRepeat,match=expression.match(/^\s*(.+)\s+in\s+(.*?)$/);if(!match)throw Error("Expected slyRepeat in form of '_item_ in _collection_' but got '"+expression+"'.");var iterVar=match[1],collectionExpr=match[2];if(match=iterVar.match(/^(?:([\$\w]+))$/),!match)throw Error("'item' in 'item in collection' should be identifier but got '"+lhs+"'.");var previousElements=[],previousElementBuffer=[],deregisterCallback=$scope.$watchCollection(collectionExpr,function(collection){if(collection){if(!isArray(collection))throw Error("'collection' did not evaluate to an array.  expression was "+collectionExpr);var originalPreviousElementsLength=previousElements.length;if(previousElements.length<collection.length&&previousElementBuffer.length>0){var limit=previousElements.length+previousElementBuffer.length;limit>collection.length&&(limit=collection.length),previousElements=previousElements.concat(previousElementBuffer.splice(0,limit-previousElements.length))}var currentElements=null,currentElementBuffer=[],newElements=[];if(collection.length>previousElements.length){for(var i=previousElements.length;i<collection.length;++i){var newElement={scope:$scope.$new(),isActiveForRepeat:!0};gateWatchersForScope(newElement),newElement.scope.$index=i,newElement.scope.$first=0==i,newElements.push(newElement)}currentElements=previousElements.concat(newElements),currentElementBuffer=previousElementBuffer}else if(collection.length<previousElements.length){for(var i=collection.length;i<previousElements.length;++i)previousElements[i].isActiveForRepeat=!1;currentElementBuffer=previousElements.splice(collection.length,previousElements.length-collection.length).concat(previousElementBuffer),currentElements=previousElements}else currentElements=previousElements,currentElementBuffer=previousElementBuffer;if(currentElements.length>0){var firstIndexToFix=currentElements.length-1,lastIndexToFix=currentElements.length-1;originalPreviousElementsLength<currentElements.length&&(firstIndexToFix=originalPreviousElementsLength),firstIndexToFix>0&&(firstIndexToFix-=1);for(var i=firstIndexToFix;i<=lastIndexToFix;++i)currentElements[i].scope.$last=i==currentElements.length-1,currentElements[i].scope.$middle=0!=i&&i!=currentElements.length-1,currentElements[i].isActiveForRepeat||(currentElements[i].isActiveForRepeat=!0,currentElements[i].element.css("display",""))}for(var i=0;i<currentElementBuffer.length&&!currentElementBuffer[i].isActiveForRepeat;++i)currentElementBuffer[i].element.css("display","none");for(var i=0;i<currentElements.length;++i)currentElements[i].scope[iterVar]=collection[i];var prevElement=$element;previousElements.length>0&&(prevElement=previousElements[previousElements.length-1].element);for(var i=0;i<newElements.length;++i)linker(newElements[i].scope,function(clone){$animate.enter(clone,null,prevElement),prevElement=clone,newElements[i].element=clone});previousElements=currentElements,previousElementBuffer=currentElementBuffer}});$scope.$on("$destroy",function(){deregisterCallback()})}}}}]),defineScalyrAngularModule("gatedScope",[]).config(["$provide",function($provide){$provide.decorator("$rootScope",["$delegate","$exceptionHandler",function($rootScope,$exceptionHandler){var scopePrototype={};for(var key in $rootScope)isFunction($rootScope[key])&&(scopePrototype[key]=$rootScope[key]);var initWatchVal,Scope=$rootScope.constructor,methodsToAdd={};return methodsToAdd.$new=function(isolate){var result=scopePrototype.$new.call(this,isolate);return result.$$gatingFunction=this.$$gatingFunction,result.$$parentGatingFunction=this.$$gatingFunction,result.$$shouldGateFunction=this.$$shouldGateFunction,result.$$gatedWatchers=[],result.$$cleanUpQueue=this.$$cleanUpQueue,result},methodsToAdd.$digestGated=function(targetGatingFunction){var watch,value,watchers,length,next,last,current=this,target=this,dirty=!1;do{if(watchers=current.$$gatedWatchers)for(length=watchers.length;length--;)try{if(watch=watchers[length],watch.gatingFunction!==targetGatingFunction)continue;watch&&!isNull(watch.cleanUp)&&(watch.cleanUp(),watch.cleanUp=null),watch&&(value=watch.get(current))!==(last=watch.last)&&!(watch.eq?areEqual(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))&&(dirty=!0,watch.last=watch.eq?copy(value):value,watch.fn(value,last===initWatchVal?value:last,current))}catch(e){$exceptionHandler(e)}if(!(next=current.$$gatingFunction===targetGatingFunction&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);return targetGatingFunction.hasDigested=!0,dirty},methodsToAdd.$watch=function(watchExpression,listener,objectEquality,directiveName){if(isNull(this.$$gatingFunction)||!isNull(this.$$shouldGateFunction)&&!this.$$shouldGateFunction(watchExpression,listener,objectEquality,directiveName))return scopePrototype.$watch.call(this,watchExpression,listener,objectEquality);var tmp=this.$$watchers;this.$$watchers=this.$$gatedWatchers;var result=scopePrototype.$watch.call(this,watchExpression,listener,objectEquality);this.$$watchers=tmp,this.$$gatedWatchers[0].gatingFunction=this.$$gatingFunction,this.$$gatedWatchers[0].cleanUp=null,initWatchVal=this.$$gatedWatchers[0].last;var watch=this.$$gatedWatchers[0];if(this.$$gatingFunction.shouldEvalNewWatchers&&this.$$gatingFunction.hasDigested){var self=this;watch.cleanUp=scopePrototype.$watch.call(self,function(){isNull(watch.cleanUp)||(self.$$cleanUpQueue.unshift(watch.cleanUp),watch.cleanUp=null);var value,last=initWatchVal;return watch&&(value=watch.get(self))!==(last=watch.last)&&!(watch.eq?areEqual(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))&&(watch.last=watch.eq?copy(value):value,watch.fn(value,last===initWatchVal?value:last,self)),watch.last})}return result},methodsToAdd.$digest=function(){var dirty=!1;if(!isNull(this.$$parentGatingFunction)&&this.$$parentGatingFunction()){var ttl=5;do if(dirty=this.$digestGated(this.$$parentGatingFunction),ttl--,dirty&&!ttl--)throw Error(TTL+" $digest() iterations reached for gated watcher. Aborting!\nWatchers fired in the last 5 iterations.");while(dirty)}dirty=scopePrototype.$digest.call(this)||dirty;for(var cleanUpQueue=this.$$cleanUpQueue;cleanUpQueue.length;)try{cleanUpQueue.shift()()}catch(e){$exceptionHandler(e)}return dirty},methodsToAdd.$addWatcherGate=function(gatingFunction,shouldGateFunction,shouldEvalNewWatchers){var changeCount=0,self=this,hasNestedGates=!isNull(this.$$gatingFunction);!function(){var promotedWatcher=null;self.$watch(function(){return gatingFunction()?self.$digestGated(gatingFunction)&&++changeCount:hasNestedGates&&isNull(promotedWatcher)&&(promotedWatcher=scopePrototype.$watch.call(self,function(){return gatingFunction()&&(promotedWatcher(),promotedWatcher=null,self.$digestGated(gatingFunction)&&++changeCount),changeCount})),changeCount})}(),isUndefined(shouldGateFunction)&&(shouldGateFunction=null),isUndefined(shouldEvalNewWatchers)&&(shouldEvalNewWatchers=!1),this.$$gatingFunction=gatingFunction,this.$$gatingFunction.shouldEvalNewWatchers=shouldEvalNewWatchers,this.$$shouldGateFunction=shouldGateFunction},angular.extend(Scope.prototype,methodsToAdd),angular.extend($rootScope,methodsToAdd),$rootScope.$$gatingFunction=null,$rootScope.$$parentGatingFunction=null,$rootScope.$$shouldGateFunction=null,$rootScope.$$gatedWatchers=[],$rootScope.$$cleanUpQueue=[],$rootScope}])}]);