defineScalyrAngularModule("slyRepeat",["gatedScope"]).directive("slyRepeat",["$animate","$parse",function(e){function t(e){e.scope.$addWatcherGate(function(){return e.isActiveForRepeat})}return{restrict:"A",scope:!0,transclude:"element",priority:1e3,terminal:!0,compile:function(a,n,i){return function(a,n,o){var r=o.slyRepeat,s=r.match(/^\s*(.+)\s+in\s+(.*?)$/);if(!s)throw Error("Expected slyRepeat in form of '_item_ in _collection_' but got '"+r+"'.");var l=s[1],u=s[2];if(s=l.match(/^(?:([\$\w]+))$/),!s)throw Error("'item' in 'item in collection' should be identifier but got '"+lhs+"'.");var c=[],h=[],d=a.$watchCollection(u,function(o){if(o){if(!isArray(o))throw Error("'collection' did not evaluate to an array.  expression was "+u);var r=c.length;if(c.length<o.length&&h.length>0){var s=c.length+h.length;s>o.length&&(s=o.length),c=c.concat(h.splice(0,s-c.length))}var d=null,g=[],m=[];if(o.length>c.length){for(var p=c.length;p<o.length;++p){var f={scope:a.$new(),isActiveForRepeat:!0};t(f),f.scope.$index=p,f.scope.$first=0==p,m.push(f)}d=c.concat(m),g=h}else if(o.length<c.length){for(var p=o.length;p<c.length;++p)c[p].isActiveForRepeat=!1;g=c.splice(o.length,c.length-o.length).concat(h),d=c}else d=c,g=h;if(d.length>0){var S=d.length-1,y=d.length-1;r<d.length&&(S=r),S>0&&(S-=1);for(var p=S;p<=y;++p)d[p].scope.$last=p==d.length-1,d[p].scope.$middle=0!=p&&p!=d.length-1,d[p].isActiveForRepeat||(d[p].isActiveForRepeat=!0,d[p].element.css("display",""))}for(var p=0;p<g.length&&!g[p].isActiveForRepeat;++p)g[p].element.css("display","none");for(var p=0;p<d.length;++p)d[p].scope[l]=o[p];var v=n;c.length>0&&(v=c[c.length-1].element);for(var p=0;p<m.length;++p)i(m[p].scope,function(t){e.enter(t,null,v),v=t,m[p].element=t});c=d,h=g}});a.$on("$destroy",function(){d()})}}}}]);