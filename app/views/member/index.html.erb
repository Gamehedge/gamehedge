<% content_for :title, "Gamehedge - " + current_client.name %>

    <div class="view-container">
        <div class="view-frame animate-view">
            <main id="account">
                <div class="container">
                    <div class="row" id="info-container">
                        
                    </div>  
                </div>
            </main>
        </div>
    </div>


<%= javascript_include_tag 'bootstrap3-typeahead.min', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'moment', 'data-turbolinks-track' => true %>





<script>
  $(document).ready(function(){
    $(".intro-full").addClass("hidden2");
    $("#head-container").addClass("dark-header");
    $.ajax({
        method: "GET",
        url: '/clients/show?id='+<%= current_client.te_uid %>,
        success: function(response){
            var client = response.client;
            var cc_url = "";
            var part1 = "";
            var part2 = "";
            if(client.primary_credit_card != null){
                switch(client.primary_credit_card.card_company.toLowerCase()){
                    case "visa": 
                        cc_url = ' <img src="<%= image_url "visa.png" %>" class="credicard-img"> ';
                        break;
                    case "mastercard": 
                        cc_url = ' <img src="<%= image_url "mastercard.png" %>" class="credicard-img"> ';
                        break;
                    case "amex": 
                        cc_url = ' <img src="<%= image_url "amex.png" %>" class="credicard-img"> ';
                        break;
                    case "discover": 
                        cc_url = ' <img src="<%= image_url "discover.png" %>" class="credicard-img"> ';
                        break;
                }
                part1 = '<section id="customer-billing"><h2>Default Billing Method</h2>'+ cc_url + client.primary_credit_card.card_company + ' ending in ' + client.primary_credit_card.last_digits + ' Exp ' + client.primary_credit_card.expiration_month + '/' + client.primary_credit_card.expiration_year + '<address>' + client.primary_credit_card.address.name + '<br />' + client.primary_credit_card.address.street_address + '<br />' + client.primary_credit_card.address.locality + ', ' + client.primary_credit_card.address.region + ' ' + client.primary_credit_card.address.postal_code + '</address></section>'
            }
            else{
                part1 = '<section id="customer-billing"><h2>Default Billing Method</h2>No credit card stored</section>'
            }
            if(client.primary_shipping_address != null){
                part2 = '<section id="customer-shipping"><h2>Default Shipping Address</h2><address>' + client.primary_shipping_address.name + '<br />' + client.primary_shipping_address.street_address + '<br />' + client.primary_shipping_address.locality + ', ' + client.primary_shipping_address.region + ' ' + client.primary_shipping_address.postal_code + '</address></section>'
            }
            else{
                part2 = '<section id="customer-shipping"><h2>Default Shipping Address</h2>No addresses stored</section>'
            }
            var htm = '<div class="col-md-4">'+part1+'</div><div class="col-md-4">'+part2+'</div><div class="col-md-4"><section id="customer-contact"><h2>Contact Information</h2><p><strong>Phone Number: </strong> ' + client.primary_phone_number.number + '</p><p><strong>Email Address: </strong> ' + client.primary_email_address.address + '</p></section></div>'
            $("#info-container").html(htm);
        },
        error: function(response){

        },
    });
  });
</script>
   





   